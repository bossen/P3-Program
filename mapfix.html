<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map-canvas { height: 100% }
    </style>
    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyACnSnrj-Vzj_6ZEeVpAFTtuuXOsXVRaO0&sensor=true">
    </script>
    <script type="text/javascript">

      var geocoder;
      var map;
      //var marker;
      var MarkerArray = [];
      var infoWindow = null;
      var location;

      function GetLocation(address) {
        var returnvalue;
        GetGeocode(address, function(LocationData) {
            setTimeout( function() { returnvalue = LocationData } ,1000);        
        })
          return returnvalue;
      }

      function InsertMarker(address, name, infostring) {

          GetGeocode(address, function(LocationData) {
              
              if (name == undefined) {
                      CreateSingleMarker(LocationData);
              }
              else {
                    AddMarkers(LocationData, name, infostring)
              }
          });
           
      }


      function initialize() {


        var mapOptions = {
          //We set the default center to "Aalborg"
          center: new google.maps.LatLng(57.043733, 9.9485388),
          zoom: 13
        };

        map = new google.maps.Map(document.getElementById("map-canvas"),
            mapOptions);
      }

      function GetGeocode(address, callback) {
        geocoder = new google.maps.Geocoder();

        geocoder.geocode( { 'address': address}, function(results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
                callback(results[0].geometry.location);          
            }
        })
      } 

      function CreateSingleMarker(location, name) {
          var marker = new google.maps.Marker({
              position: location,
              map: map,
              title: name
          })

          MarkerArray.push(marker);
      }


      function AddMarkers(location, name, infostring) {

          infoWindow = new google.maps.InfoWindow({
              content: "Loading..."
          });

              var marker = new google.maps.Marker({
              position: location,
              map: map,
              title: name,
              info: infostring
          })

          //marker.set('location', location);

          google.maps.event.addListener(marker, "click", function () {
          infoWindow.setContent(this.info);
          infoWindow.open(map, this);
          })

          google.maps.event.addListener(map, "click", function(){
          infoWindow.close();

          MarkerArray.push(marker)
          })
        }

        google.maps.event.addDomListener(window, 'load', initialize);

            var a = "Aalborg";
            var b = "testnavn";
            var c = "thisiscontent";
            var a1 = "Norresundby";
            var b1 = "testnavn2";
            var c1 = "alot of text here, also link";
            //InsertMarker(a);
            //InsertMarker(a,b,c);
            //InsertMarker(a1,b1,c1);

            var test1;
            var randomaddress = "Holstebro";
            test1 = GetLocation(randomaddress);
            alert(test1);

    </script>
  </head>
  <body>
    <div id="map-canvas"/>
  </body>
</html>